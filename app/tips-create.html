<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>♥ Treasury Insights</title>

  <meta charset="utf-8"/>

  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport'/>
  <meta name="viewport" content="width=device-width"/>

  <link rel="icon" type="image/png" href="images/favicon.ico">
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

  <link href="assets/css/hipster_cards.css" rel="stylesheet"/>

  <!--     Fonts and icons     -->
  <link href="assets/css/pe-icon-7-stroke.css" rel="stylesheet" />
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" />
  <link href='https://fonts.googleapis.com/css?family=Playfair+Display|Raleway:700,100,400|Roboto:400,700|Playfair+Display+SC:400,700' rel='stylesheet' type='text/css'>


  <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function () {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-73481201-1', 'treasury.love');
    ga('send', 'pageview');

    // document.addEventListener("DOMContentLoaded", function() {
    //   setupListener();
    // });

  </script>

  <style>
    .card{
      margin-bottom: 70px;
    }
  </style>

</head>
<body style="padding-top: 70px;">

<nav id="mainNav" class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand page-scroll" href="index.html#page-top">♥ Treasury</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        <li>
          <a class="page-scroll" href="journal.html">Journal</a>
        </li>
        <li>
          <a class="page-scroll" href="index.html#about">About</a>
        </li>
        <li>
          <a class="page-scroll" href="index.html#services">Services</a>
        </li>
        <li>
          <a class="page-scroll" href="tips.html">Tips</a>
        </li>
        <li>
          <a class="page-scroll" href="index.html#contact">Contact</a>
        </li>
        <li>
          <a class="page-scroll" id="profile_link" href="Account.html">Account</a>
        </li>
        <li>
          <a class="page-scroll" id="logout_link" style="display: none" href="logout.html">Logout</a>
        </li>
      </ul>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container-fluid -->
</nav>

<div class="wrapper">
  <div class="container">

    <div class="masonry-container">

      <div id="insights">
        <div class="col-md-8">
          <h1>Creat Tip</h1>
          <form id="createTip">
            <div class="form-group">
              <label for="tip-title">Tip Title:</label>
              <input type="text" class="form-control" id="tip-title">
            </div>
            <div class="form-group">
              <label for="tip-body">Tip Body:</label>
              <textarea class="form-control" rows="5" id="tip-body"></textarea>
            </div>
            <button type="submit" class="btn btn-default">Submit</button>
          </form>
          <div id="status" class="alert alert-success" role="alert">...</div>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  const endpoint = 'https://frank.treasury.love';
  document.getElementById("status").innerHTML = "";

  document.querySelector("#createTip").addEventListener("submit", function(e){
    e.preventDefault();

    const data = '{"data": {"type":"insights", "attributes":{"title":"' + document.getElementById('tip-title').value + '", "body":"' + document.getElementById('tip-body').value + '"}}}';
          		// body: document.getElementById('tip-body').value
    fetch(endpoint + "/insights",
    {
        headers: new Headers({
          'Content-Type': 'application/vnd.api+json'
        }),
        method: "POST",
        body: data //JSON.stringify({ data })
    }).then(function(res){ return res.json(); }).then(function(body){
      document.getElementById("status").innerHTML = "Success";
    })
  });

</script>

<script type="text/javascript" src="https://code.jquery.com/jquery-2.2.3.min.js" integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo=" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/es6-shim/0.35.1/es6-shim.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.min.js"></script>


</body>
</html>
