<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>Love Journal</title>

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport'/>
    <meta name="viewport" content="width=device-width"/>

    <link rel="icon" type="image/png" href="images/favicon.ico">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://cdn.datatables.net/1.10.11/css/dataTables.bootstrap.min.css" rel="stylesheet"/>
    <link href="https://cdn.datatables.net/buttons/1.2.0/css/buttons.dataTables.min.css" rel="stylesheet"/>

    <!-- Custom Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,300' rel='stylesheet' type='text/css'>


    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                        (i[r].q = i[r].q || []).push(arguments)
                    }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-73481201-1', 'auto');
        ga('send', 'pageview');

    </script>
</head>

<body>

<nav id="mainNav" class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand page-scroll" href="index.html#page-top">â™¥ Treasury</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="page-scroll" href="journal.html">Journal</a>
                </li>
                <li>
                    <a class="page-scroll" href="index.html#about">About</a>
                </li>
                <li>
                    <a class="page-scroll" href="index.html#services">Services</a>
                </li>
                <li>
                    <a class="page-scroll" href="index.html#privacy">Privacy</a>
                </li>
                <li>
                    <a class="page-scroll" href="index.html#contact">Contact</a>
                </li>
                <li>
                    <a class="page-scroll" id="profile_link" href="Account.html">Account</a>
                </li>
                <li>
                    <a class="page-scroll" id="logout_link" style="display: none" href="logout.html">Logout</a>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
</nav>

<div class="container" style="padding-top: 5em">

    <h3>Past entries</h3>

    <table id="entries" class="table table-striped" cellspacing="0" width="100%">
        <thead>
            <th>rating</th>
            <th>occurred-on</th>
            <th>note</th>
        </thead>
    </table>
</div>

<script src="https://code.jquery.com/jquery-2.2.3.min.js" integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo=" crossorigin="anonymous"></script>
<script src="https://cdn.datatables.net/1.10.11/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.12/js/dataTables.bootstrap.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.2.0/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js"></script>
<script src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/pdfmake.min.js"></script>
<script src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/1.2.0/js/buttons.print.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.2.0/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/scroller/1.4.2/js/dataTables.scroller.min.js"></script>

<script>
    var profile_id = JSON.parse(localStorage.getItem('profile_id'));
    $(document).ready(function() {
        $('#entries').DataTable( {
//            paging: true,
//            scrollY: 500,
//            "order": [[ 1, "asc" ]],
//            "processing": true,
//            "serverSide": true,
            dom: 'Bfrtip',
            buttons: [
                'pdfHtml5', 'csvHtml5', 'pageLength'
            ],
            lengthMenu: [
                [ 10, 25, 50, -1 ],
                [ '10 rows', '25 rows', '50 rows', 'Show all' ]
            ],
//            select: true,
            "ajax": 'https://frank.treasury.love/profiles/' + profile_id + '/entries?page[limit]=50&?page[size]=10&sort=-rating',
            dataSrc: 'data.attributes',
            columns: [
                { "data": "attributes.rating" },
                { "data": "attributes.occurred-on" },
                { "data": "attributes.note" }
//                {
//                    data: function (row, type, set) {
//                        debugger;
//                        if (type === 'attributes.occurred-on') {
//                            return 'huh';
//                        }
//                    }
//                }
            ]
        } );
    } );
</script>

</body>
</html>