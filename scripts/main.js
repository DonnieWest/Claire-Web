"use strict";function setProfileLink(){var e=JSON.parse(localStorage.getItem("profile"));null!=e&&$("#profile_link").text(JSON.parse(localStorage.getItem("profile")).firstname)}function checkForProfile(){var e=JSON.parse(localStorage.getItem("profile"));(null==e||0==e.length)&&(console.log("Window Location "+window.location),window.location.href.indexOf("journal.html")>-1&&(window.location="Account.html"))}function checkForUpgrade(){var e=localStorage.getItem("version");null==e?localStorage.setItem("version",1):version>e&&performUpgrade()}var version=1,apiDomainURL="";apiDomainURL="localhost"===window.location.hostname?"http://localhost:3000":"https://frank.treasury.love",$(document).ready(function(){checkForUpgrade(),checkForProfile(),setProfileLink()}),$("#entry").submit(function(){var e=$("#rating").val();0==e&&(e=null);var t="";$("textarea").each(function(){t+=this.value,t+="--",t+="\r\n"});var o=JSON.parse(localStorage.getItem("profile_id")),a=JSON.parse(localStorage.getItem("linked_profile_id")),r='{ "data":{ "type": "entries","relationships": {"profile":{ "data":{ "type": "profiles", "id": "'+o+'" }}},"attributes": {"received":"true","private":"false","note":'+JSON.stringify(t)+', "rating":'+e+',"linked-profile-id":'+a+"}}}";console.log("Submitting journal entry "+r),$.ajax({type:$(this).attr("method"),url:apiDomainURL+$(this).attr("action"),data:r,headers:{Accept:"application/json","Content-Type":"application/vnd.api+json"},dataType:"JSON"}).success(function(e){console.log("JSON success response",e),toastr.success("Successfully saved entry"),$("#entry").trigger("reset")}).error(function(e){console.log(e),toastr.error("There was a problem.")}),event.preventDefault()}),function(e){e("a.page-scroll").bind("click",function(t){var o=e(this);e("html, body").stop().animate({scrollTop:e(o.attr("href")).offset().top-50},1250,"easeInOutExpo"),t.preventDefault()}),e("body").scrollspy({target:".navbar-fixed-top",offset:51}),e(".navbar-collapse ul li a").click(function(){e(".navbar-toggle:visible").click()}),e("h1").fitText(1.2,{minFontSize:"35px",maxFontSize:"65px"}),e("#mainNav").affix({offset:{top:100}}),(new WOW).init()}(jQuery);